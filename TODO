==== Bugs

* suggestion arrow colors don't update as they should?
* double click insert variant; trying to delete it

? Charter buggy
? Windows file chooser; worked-around by using LnF. Windows original is desirable.
? antialiasing when running jose.exe vs. java.exe vs. debugger ?

==== Project

compile sources against 1.8 32bit [x]
libraries needed:
? TraceConnection probably not needed anyway
* get rid of some outdated stuff (customizing for jdk 1.4, 1.5, plafs, ...)

==== Linux build (!!)
* requires jre 1.8 (i386)
* requires some extra libraries (i386)
    - libXrender.so.1, libXtst.so.6, libXi.so6, libstdc++.so.5
* todo cross-compile easylink for i386. Which extra libaries are needed?
* bin/unrar: either put libstdc++.so.5 into LD_LIBRARY_PATH, or use Linux_x86_64/unrar

[-] port JavaLauncher, or use shc
[x] java.desktop

==== macOS

[x] macOS 15 Sequoia VM
[x] jdk1.8 (64 bit)
[x] 64 bit binaries for stockfish
[x] and lc0. via brew
[x] mysqld standalone 5.0.67 for MacOS 64, (remember to copy share too)
[x] upgrade mysql.jar
[-] Java3D

BUG: Chess Berlin figurines print wrong. Other fonts seem to work.
BUG: Print Preview does not work

[-] compile easylink
 ### project compiles, but can't connect to chessboard)

[x] upgrade libquaqua
[?] https://violetlib.org/vaqua. Problems! More modern but not overwhelmingly beautiful :(

[x] Application Bundle vs. Java
   [x] .sh + shc. see: https://github.com/tofi86/universalJavaApplicationStub
   [x] bundle leela
   [x] bundle stockfish
   [-] Quaqua
   [-] VAqua
   [x] default lnf
   [-] Print Preview
   [-] port JavaLauncher :(   [x] upgrade mrjadapter 1.3

[x] "Apple Silicon" = arm64
    [x] jdk1.8_431, 11 (not 9?) is available from Oracle :)
    [x] MySQL 5.0.67 compile from source
        [x] Ubuntu x86_64
        [x] macOS x86_64 standalone (+libgcc)
        [-] macOS x86_64 embedded. unstable, 5.0.15 too
        [x] macOS arm64
    [x] shc
    [x] jose-arm.sh
    [x] stockfish
    [x] Lc0
    [x] test bundle


==== Deprecated Stuff

* NalimovOnlineQuery -> replace with LichessTablebaseQuery

* Positional Index !!
  - db fields are NOT USED at all
    -> makes sense because they would increase the db size x8
  - position search is performed exhaustively !?!
    - with shortcut for mat signature
    -> which is pretty dumb but effective

==== New Features

* BUG? Leela keeps analyzing while playing from book
* BUG? Leela diagnostics not always associated correctly

* arrows + text label
  - font size?
  - if possible, redraw only modified arrows

* "New Game from here"
  - turn board on engine start (or don't)
  - BUG fixed ?? engine loses synch. "stop" and "ponderhit" leave ignoreMoves > 0.

* keep playing after flagging ?

* Chessnut
  - beep: after each move
  - flip option with new game ??
  - check mate: fanfare, animation ...

* BUG: engine configurations
  - absolute path to directories?
  - can't delete? (Apply !!)

==== Postponed

* upgrade JDK
    - https://github.com/JetBrains/JetBrainsRuntime
      Jetbrains JDK (21) looks promising, because they can fix HiDPI
      and are probably well maintained
      and support all out platforms, even 32bit

* launch mysqld earlier (?)

* Graph View interactive
    - mark current move
    - tooltips
    - click navigate
* show wdl scores with bars (instead of plain text)

* LiChess Opening Explorer
    - download top games for a variation
    1. show in EngPanel comments "{ Anand-Carlsen 2014, ... }" (but it should be clickable)
    2. insert as sub-lines (most convenient, but a lot of text)
    3. open in tabs?
    4. copy to local db?
* replace Nalimov query with Lichess tablebase query

* Refactor Scoring !!
    - no more float[]. Use Score.wdl instead.
        Normalisation (and validity) can be based on wdl (plus engine knowledge).
    - only one ground truth: MoveNode.score
    - drop EvalArray (read data from Game tree directly)
    - drop BoardView.eval (read from Game.currentMove())
    - use similar updating mechanism for Engine and Book evals

* Contempt Slider
        White seeks a draw - neutral - Black seeks a draw - Armageddon
    -1   ...............        0         ............         +1
        Black avoids a draw            White avoids a draw

    Armageddon = Black seeks a draw at any cost; white avoids a draw at any cost.

? see https://lczero.org/blog/2023/07/the-lc0-v0.30.0-wdl-rescale/contempt-implementation/
 there is some confusion about the effective parameters. Online docu is not up-to-date :(

* score POV adjustable?
  * uci reports current pov
  * UciPlugin "adjusts" pov to white (in the process creating artifacts, like negative win-percentage)
  * panel shows always white pov (might be user-adjustable)
  * eval bar **must** use white pov [0..1]
  * suggestions arrows **must** use current pov * [0..1]

? commentary arrows and highlights


==== Misc Errors


 ---- Fri Jan 03 10:47:22 CET 2025 ----
java.sql.SQLException: Incorrect key file for table 'C:\dev\jose\work\database\mysql\jose\Event.MYI'; try to repair it
	at com.mysql.embedded.api.stmt.mysql_stmt_execute(Native Method)
	at com.mysql.embedded.jdbc.MyPreparedStatement.execute(MyPreparedStatement.java:101)
	at de.jose.db.JoPreparedStatement.execute(JoPreparedStatement.java:74)
	at de.jose.db.JoPreparedStatement.selectInt(JoPreparedStatement.java:326)
	at de.jose.task.db.GameUtil.resolveString(GameUtil.java:936)
	at de.jose.task.db.GameUtil.resolveEvent(GameUtil.java:912)
	at de.jose.pgn.Game.setGameParameters(Game.java:1255)
	at de.jose.pgn.Game.save(Game.java:1372)
	at de.jose.pgn.Game.save(Game.java:1329)
	at de.jose.pgn.Game.save(Game.java:1312)

java.lang.RuntimeException: Invalid insert
	at de.jose.pgn.MoveNode$MoveNodeFormatter.flush(MoveNode.java:229)
	at de.jose.pgn.MoveNode$MoveNodeFormatter.figurine(MoveNode.java:207)
	at de.jose.chess.MoveFormatter.doFormatShort(MoveFormatter.java:246)
	at de.jose.chess.MoveFormatter.doFormat(MoveFormatter.java:188)
	at de.jose.chess.MoveFormatter.format(MoveFormatter.java:140)
	at de.jose.chess.MoveFormatter.format(MoveFormatter.java:127)
	at de.jose.chess.MoveFormatter.format(MoveFormatter.java:119)
	at de.jose.pgn.MoveNode.insert(MoveNode.java:151)
	at de.jose.pgn.Game.insertNode(Game.java:1008)
	at de.jose.pgn.Game.insertNode(Game.java:908)
	at de.jose.pgn.Game.doInsertMove(Game.java:797)
	at de.jose.pgn.Game.insertMove(Game.java:782)
	at de.jose.Application.handleUserMove(Application.java:2401)
